<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Lifecycle Callbacks</title>
  </head>
  <body>
    <!-- Can you create something interesting using lifecycle callbacks? -->

    <template>
      <p>I'm just a lonely old paragraph tag...</p>
    </template>

    <my-widget></my-widget>

    <script>
      var tmpl = document.querySelector('template');

      var WidgetProto = Object.create(HTMLElement.prototype);

      WidgetProto.createdCallback = function() {
        var root = this.createShadowRoot();
        root.appendChild(tmpl.content.cloneNode(true));

        // We query the shadow root for the paragraph
        // instead of the template. That's because we're *copying*
        // the contents of the template into the shadow root.
        this.paragraph = root.querySelector('p');
      };

      WidgetProto.enteredDocumentCallback = function() { };
      WidgetProto.leftDocumentCallback = function() { };
      WidgetProto.attributeChangedCallback = function(attrName, oldVal, newVal) {
        if (attrName === 'text') {
          this.paragraph.textContent = newVal;
        }
      };

      // You can alias your entered and left callbacks so your
      // elements work in future versions of Chrome
      WidgetProto.enteredViewCallback = WidgetProto.enteredDocumentCallback;
      WidgetProto.leftDocumentCallback = WidgetProto.leftViewCallback;

      document.register('my-widget', { prototype: WidgetProto });
    </script>
  </body>
</html>